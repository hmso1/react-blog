(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{28:function(e,n,t){},29:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var c,a,r,o,i,s=t(1),j=t.n(s),b=t(19),l=t.n(b),d=(t(28),t(4)),u=t(2),x=(t(29),t(3)),p=t(10),O=t(5),h=Object(s.createContext)(null),g="token",f=function(e){return localStorage.setItem(g,e)},v=function(){return localStorage.getItem(g)},m=t(0),k=x.a.div(c||(c=Object(u.a)(["\n  height: 64px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.2);\n  padding: 0px 32px;\n  box-sizing: border-box;\n  background-color: white;\n"]))),w=x.a.div(a||(a=Object(u.a)(["\n  font-size: 32px;\n  font-weight: bold;\n"]))),S=x.a.div(r||(r=Object(u.a)(["\n  display: flex;\n  align-items: center;\n"]))),y=Object(x.a)(p.b)(o||(o=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 64px;\n  box-sizing: border-box;\n  width: 100px;\n  cursor: pointer;\n  color: black;\n  text-decoration: none;\n\n  ","\n"])),(function(e){return e.$active&&"\n    background: rgba(0, 0, 0, 0.1);\n  "})),C=x.a.div(i||(i=Object(u.a)(["\n  display: flex;\n  align-items: center;\n\n  "," {\n    margin-left: 64px;\n  }\n"])),S);function z(){var e=Object(O.g)(),n=Object(s.useContext)(h),t=n.user,c=n.setUser,a=n.isGettingUser;return Object(m.jsxs)(k,{children:[Object(m.jsxs)(C,{children:[Object(m.jsx)(w,{children:"\u6211\u7684\u7b2c\u4e00\u500b\u90e8\u843d\u683c"}),Object(m.jsxs)(S,{children:[Object(m.jsx)(y,{to:"/",$active:"/"===e.pathname,children:"\u9996\u9801"}),Object(m.jsx)(y,{to:"/about",$active:"/about"===e.pathname,children:"\u95dc\u65bc\u6211\u5011"}),t&&Object(m.jsx)(y,{to:"/new_post",$active:"/new_post"===e.pathname,children:"\u767c\u4f48\u6587\u7ae0"})]})]}),!a&&Object(m.jsxs)(S,{children:[!t&&Object(m.jsx)(y,{to:"/register",$active:"/register"===e.pathname,children:"\u8a3b\u518a"}),!t&&Object(m.jsx)(y,{to:"/login",$active:"/login"===e.pathname,children:"\u767b\u5165"}),t&&Object(m.jsx)(y,{to:"/",onClick:function(){f(""),c(null)},children:"\u767b\u51fa"})]})]})}var P,U,J,T,_,D,$,A,B="https://student-json-api.lidemy.me",L=function(e){return fetch("".concat(B,"/me"),{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()}))},N=x.a.div(P||(P=Object(u.a)(["\n  margin-top: 50px;\n  text-align: center;\n"]))),E=x.a.button(U||(U=Object(u.a)(["\n  width: 80px;\n  font-size: 20px;\n  padding: 5px 0;\n  background-color: white;\n  border: 1px solid black;\n  border-radius: 5px;\n  cursor: pointer;\n\n  &:hover {\n    background-color: #000a;\n    color: #fff;\n  }\n\n  & + & {\n    margin-left: 10px;\n  }\n"]))),F=x.a.p(J||(J=Object(u.a)(["\n  display: inline-block;\n  font-size: 20px;\n  padding: 0 20px;\n"])));function I(e){var n=e.page,t=e.setCurrentPage;return Object(m.jsx)(E,{onClick:function(){t(n)},children:"\u7b2c ".concat(n," \u9801")})}function M(e){var n=e.currentPage,t=e.numberOfPosts,c=e.setCurrentPage,a=[1];return 1===n?a.push(n+1,"space"):2===n?a.push(n,n+1,"space"):a.push("space",n-1,n,n+1,"space"),a.push(Math.ceil(t/5)),Object(m.jsx)(N,{children:a.map((function(e,n){return"space"===e?Object(m.jsx)(F,{children:"..."}):Object(m.jsx)(I,{page:e,setCurrentPage:c},n)}))})}var G,W,R,q,H,K,Q=x.a.div(T||(T=Object(u.a)(["\n  width: 50%;\n  margin: 0 auto;\n"]))),V=x.a.div(_||(_=Object(u.a)(["\n  height: 325px;\n"]))),X=x.a.div(D||(D=Object(u.a)(["\n  border-bottom: 1px solid rgba(0, 12, 34, 0.2);\n  padding: 16px;\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n"]))),Y=Object(x.a)(p.b)($||($=Object(u.a)(["\n  font-size: 24px;\n  color: #333;\n  text-decoration: none;\n"]))),Z=x.a.div(A||(A=Object(u.a)(["\n  color: rgba(0, 0, 0, 0.8);\n"])));function ee(e){var n=e.post;return Object(m.jsxs)(X,{children:[Object(m.jsx)(Y,{to:"/posts/".concat(n.id),children:n.title.length>70?n.title.slice(0,70)+"...":n.title}),Object(m.jsx)(Z,{children:new Date(n.createdAt).toLocaleString()})]})}function ne(){var e=Object(s.useState)([]),n=Object(d.a)(e,2),t=n[0],c=n[1],a=Object(s.useState)(0),r=Object(d.a)(a,2),o=r[0],i=r[1],j=Object(s.useState)(1),b=Object(d.a)(j,2),l=b[0],u=b[1];return Object(s.useEffect)((function(){var e;(e=l,fetch("".concat(B,"/posts?_sort=createdAt&_order=desc&_page=").concat(e,"&_limit=5")).then((function(e){return{postsAmount:e.headers.get("x-total-count"),postsContent:e.json()}}))).then((function(e){var n=e.postsAmount,t=e.postsContent;return i(n),t})).then((function(e){return c(e)}))}),[l]),console.log(l),Object(m.jsxs)(Q,{children:[Object(m.jsx)(V,{children:t.map((function(e){return Object(m.jsx)(ee,{post:e},e.id)}))}),Object(m.jsx)(M,{currentPage:l,numberOfPosts:o,setCurrentPage:u})]})}var te,ce,ae,re,oe,ie,se,je=x.a.div(G||(G=Object(u.a)(["\n  color: red;\n"]))),be=x.a.form(W||(W=Object(u.a)(["\n  text-align: center;\n"]))),le=x.a.div(R||(R=Object(u.a)(["\n  margin-top: 20px;\n"]))),de=x.a.span(q||(q=Object(u.a)(["\n  display: inline-block;\n  width: 100px;\n  font-size: 20px;\n  margin-right: 10px;\n  text-align: end;\n"]))),ue=x.a.input(H||(H=Object(u.a)(["\n  height: 20px;\n"]))),xe=x.a.button(K||(K=Object(u.a)(["\n  margin-top: 20px;\n  width: 80px;\n  height: 40px;\n  font-size: 20px;\n  background-color: white;\n  border: 1px solid #0008;\n  border-radius: 10px;\n\n  &:hover {\n    background-color: #0008;\n    color: #fff;\n  }\n"])));function pe(){var e=Object(s.useContext)(h).setUser,n=Object(s.useState)(""),t=Object(d.a)(n,2),c=t[0],a=t[1],r=Object(s.useState)(""),o=Object(d.a)(r,2),i=o[0],j=o[1],b=Object(s.useState)(""),l=Object(d.a)(b,2),u=l[0],x=l[1],p=Object(O.f)();return Object(m.jsxs)(be,{onSubmit:function(n){if(n.preventDefault(),x(null),!c||!i)return x("\u8acb\u586b\u5beb Username \u548c Password");(function(e,n){return fetch("".concat(B,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:e,password:n})}).then((function(e){return e.json()}))})(c,i).then((function(n){if(0===n.ok)return x(n.message);f(n.token),L(n.token).then((function(n){if(1!==n.ok)return f(null),x(n.message.toString());e(n.data),p.push("/")}))}))},children:[Object(m.jsxs)(le,{children:[Object(m.jsx)(de,{children:"Username\uff1a"}),Object(m.jsx)(ue,{value:c,onChange:function(e){return a(e.target.value)}})]}),Object(m.jsxs)(le,{children:[Object(m.jsx)(de,{children:"Password:"}),Object(m.jsx)(ue,{type:"password",value:i,onChange:function(e){return j(e.target.value)}})]}),Object(m.jsx)(xe,{children:"\u767b\u5165"}),u&&Object(m.jsx)(je,{children:u})]})}var Oe=x.a.div(te||(te=Object(u.a)(["\n  width: 50%;\n  margin: 0 auto;\n"]))),he=x.a.div(ce||(ce=Object(u.a)([""]))),ge=x.a.div(ae||(ae=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n  border-bottom: 1px solid #0005;\n"]))),fe=x.a.h1(re||(re=Object(u.a)(["\n  font-size: 20px;\n  width: 75%;\n  word-break: break-all;\n"]))),ve=x.a.div(oe||(oe=Object(u.a)(["\n  margin: auto 0;\n"]))),me=x.a.div(ie||(ie=Object(u.a)(["\n  padding-top: 20px;\n  word-break: break-all;\n"])));function ke(e){var n=e.post;return Object(m.jsxs)(he,{children:[Object(m.jsxs)(ge,{children:[Object(m.jsx)(fe,{children:n.title}),Object(m.jsx)(ve,{children:new Date(n.createdAt).toLocaleString()})]}),Object(m.jsx)(me,{children:n.body})]})}var we,Se,ye,Ce,ze,Pe,Ue=Object(x.a)(p.b)(se||(se=Object(u.a)(["\n  display: block;\n  color: #222;\n  padding-top: 20px;\n  text-decoration: none;\n\n  &:hover {\n    color: pink;\n  }\n"])));function Je(){var e=Object(s.useState)([]),n=Object(d.a)(e,2),t=n[0],c=n[1],a=Object(O.h)().id;return Object(s.useEffect)((function(){(function(e){return fetch("".concat(B,"/posts/").concat(e)).then((function(e){return e.json()}))})(a).then((function(e){return c(e)}))}),[a]),console.log(t),Object(m.jsxs)(Oe,{children:[Object(m.jsx)(ke,{post:t}),Object(m.jsx)(Ue,{to:"/",children:"<- \u8fd4\u56de\u9996\u9801"})]})}var Te,_e,De,$e=x.a.div(we||(we=Object(u.a)(["\n  color: red;\n"]))),Ae=x.a.form(Se||(Se=Object(u.a)(["\n  text-align: center;\n"]))),Be=x.a.div(ye||(ye=Object(u.a)(["\n  margin-top: 20px;\n"]))),Le=x.a.span(Ce||(Ce=Object(u.a)(["\n  display: inline-block;\n  width: 180px;\n  font-size: 20px;\n  margin-right: 10px;\n  text-align: end;\n"]))),Ne=x.a.input(ze||(ze=Object(u.a)(["\n  height: 20px;\n"]))),Ee=x.a.button(Pe||(Pe=Object(u.a)(["\n  margin-top: 20px;\n  width: 80px;\n  height: 40px;\n  font-size: 20px;\n  background-color: white;\n  border: 1px solid #0008;\n  border-radius: 10px;\n\n  &:hover {\n    background-color: #0008;\n    color: #fff;\n  }\n"])));function Fe(){var e=Object(s.useState)(""),n=Object(d.a)(e,2),t=n[0],c=n[1],a=Object(s.useState)(""),r=Object(d.a)(a,2),o=r[0],i=r[1],j=Object(s.useState)(""),b=Object(d.a)(j,2),l=b[0],u=b[1],x=Object(s.useState)(""),p=Object(d.a)(x,2),g=p[0],v=p[1],k=Object(s.useState)(""),w=Object(d.a)(k,2),S=w[0],y=w[1],C=Object(s.useContext)(h).setUser,z=Object(O.f)();return Object(m.jsxs)(Ae,{onSubmit:function(e){return e.preventDefault(),y(null),t&&o&&l&&g?l!==g?y("\u8f2a\u5165\u5bc6\u78bc\u4e0d\u540c"):t===o?y("Username \u548c Nickname \u4e0d\u53ef\u4ee5\u4e00\u6a23"):void function(e,n,t){return fetch("".concat(B,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:e,nickname:n,password:t})}).then((function(e){return e.json()}))}(t,o,l).then((function(e){if(console.log(e),1!==e.ok)return y(e.message.toString());f(e.token),L(e.token).then((function(e){if(1!==e.ok)return f(null),y(e.message.toString());C(e.data),z.push("/")}))})):y("\u8acb\u586b\u5beb\u6240\u6709\u6b04\u4f4d")},children:[Object(m.jsxs)(Be,{children:[Object(m.jsx)(Le,{children:"Username\uff1a"}),Object(m.jsx)(Ne,{value:t,onChange:function(e){return c(e.target.value)}})]}),Object(m.jsxs)(Be,{children:[Object(m.jsx)(Le,{children:"Nickname"}),Object(m.jsx)(Ne,{value:o,onChange:function(e){return i(e.target.value)}})]}),Object(m.jsxs)(Be,{children:[Object(m.jsx)(Le,{children:"Password:"}),Object(m.jsx)(Ne,{type:"password",value:l,onChange:function(e){return u(e.target.value)}})]}),Object(m.jsxs)(Be,{children:[Object(m.jsx)(Le,{children:"Confirm Password:"}),Object(m.jsx)(Ne,{type:"password",value:g,onChange:function(e){return v(e.target.value)}})]}),Object(m.jsx)(Ee,{children:"\u8a3b\u518a"}),S&&Object(m.jsx)($e,{children:S})]})}var Ie,Me,Ge,We,Re,qe,He,Ke=x.a.p(Te||(Te=Object(u.a)(["\n  width: 50%;\n  margin: 30px auto;\n  font-size: 20px;\n"]))),Qe=x.a.ol(_e||(_e=Object(u.a)([""]))),Ve=x.a.li(De||(De=Object(u.a)(["\n  & + & {\n    margin-top: 15px;\n  }\n"])));function Xe(){return Object(m.jsxs)(Ke,{children:[Object(m.jsx)("p",{children:"\u9019\u662f\u4e00\u500b Lidemy Mentor Program \u7684\u529f\u8ab2\u3002\u904e\u7a0b\u4e2d\u6703\u7528\u5230 React \u4f86\u5be6\u4f5c Blog \u7684\u57fa\u672c\u529f\u80fd\uff0c\u5305\u62ec\uff1a"}),Object(m.jsxs)(Qe,{children:[Object(m.jsx)(Ve,{children:"\u767b\u5165\u9801\u9762\uff1a\u4ee5 JWT \u4f86\u505a\u767b\u5165\u9a57\u8b49"}),Object(m.jsx)(Ve,{children:"\u8a3b\u518a\u9801\u9762\uff1a\u6210\u529f\u5f8c\u6703\u9a57\u8b49 JWT \u4e26\u8fd4\u56de\u9996\u9801"}),Object(m.jsx)(Ve,{children:"\u6587\u7ae0\u5217\u8868\u9801\u9762\uff1a\u6bcf\u9801\u53ea\u986f\u793a 5 \u7b46\u6587\u7ae0\uff0c\u63d0\u4f9b\u5206\u9801\u529f\u80fd"}),Object(m.jsx)(Ve,{children:"\u55ae\u7bc7\u6587\u7ae0\u9801\u9762\uff1a\u53ef\u4ee5\u770b\u5230\u6587\u7ae0\u5b8c\u6574\u5167\u5bb9"}),Object(m.jsx)(Ve,{children:"\u767c\u8868\u6587\u7ae0\u9801\u9762\uff1a\u767b\u5165\u5f8c\uff0c\u53ef\u4ee5\u8f38\u5165\u6a19\u984c\u8ddf\u5167\u6587\u767c\u6587"})]})]})}var Ye,Ze=x.a.div(Ie||(Ie=Object(u.a)(["\n  color: red;\n"]))),en=x.a.form(Me||(Me=Object(u.a)(["\n  width: 50%;\n  margin: 0 auto;\n"]))),nn=x.a.div(Ge||(Ge=Object(u.a)(["\n  margin-top: 20px;\n"]))),tn=x.a.span(We||(We=Object(u.a)(["\n  display: inline-block;\n  font-size: 20px;\n  margin: 0 10px 5px 0;\n  text-align: end;\n"]))),cn=x.a.input(Re||(Re=Object(u.a)(["\n  width: 100%;\n  font-size: 20px;\n  display: block;\n  padding: 5px 10px;\n  box-sizing: border-box;\n"]))),an=x.a.textarea(qe||(qe=Object(u.a)(["\n  display: block;\n  width: 100%;\n  height: 300px;\n  font-size: 20px;\n  padding: 10px 10px;\n  box-sizing: border-box;\n"]))),rn=x.a.button(He||(He=Object(u.a)(["\n  margin-top: 20px;\n  width: 80px;\n  height: 40px;\n  font-size: 20px;\n  background-color: white;\n  border: 1px solid #0008;\n  border-radius: 10px;\n  display: block;\n  margin-left: auto;\n\n  &:hover {\n    background-color: #0008;\n    color: #fff;\n  }\n"])));function on(){var e=Object(s.useState)(""),n=Object(d.a)(e,2),t=n[0],c=n[1],a=Object(s.useState)(""),r=Object(d.a)(a,2),o=r[0],i=r[1],j=Object(s.useState)(""),b=Object(d.a)(j,2),l=b[0],u=b[1],x=Object(O.f)();return Object(m.jsxs)(en,{onSubmit:function(e){e.preventDefault(),u(null),t&&o||u("\u8acb\u586b\u5beb\u6a19\u984c\u548c\u5167\u5bb9"),function(e,n){var t=v();return console.log(e,n),fetch("".concat(B,"/posts"),{method:"POST",headers:{authorization:"Bearer ".concat(t),"content-type":"application/json"},body:JSON.stringify({title:e,body:n})}).then((function(e){return e.json()}))}(t,o).then((function(e){e.code&&u(e.message.toString()),x.push("/")}))},children:[Object(m.jsxs)(nn,{children:[Object(m.jsx)(tn,{children:"\u6a19\u984c\uff1a"}),Object(m.jsx)(cn,{value:t,onChange:function(e){return c(e.target.value)}})]}),Object(m.jsxs)(nn,{children:[Object(m.jsx)(tn,{children:"\u5167\u5bb9\uff1a"}),Object(m.jsx)(an,{value:o,onChange:function(e){return i(e.target.value)}})]}),Object(m.jsx)(rn,{children:"\u78ba\u5b9a"}),l&&Object(m.jsx)(Ze,{children:l})]})}var sn=x.a.div(Ye||(Ye=Object(u.a)(["\n  padding-top: 60px;\n"])));var jn=function(){var e=Object(s.useState)(null),n=Object(d.a)(e,2),t=n[0],c=n[1],a=Object(s.useState)(!0),r=Object(d.a)(a,2),o=r[0],i=r[1];return Object(s.useEffect)((function(){var e=v();if(""===e)return i(!1);L(e).then((function(e){1===e.ok?c(e.data):(f(""),c(null)),i(!1)}))}),[]),Object(m.jsx)(h.Provider,{value:{user:t,setUser:c,isGettingUser:o},children:Object(m.jsx)(sn,{children:Object(m.jsxs)(p.a,{children:[Object(m.jsx)(z,{}),Object(m.jsxs)(O.c,{children:[Object(m.jsx)(O.a,{exact:!0,path:"/",children:Object(m.jsx)(ne,{})}),Object(m.jsx)(O.a,{exact:!0,path:"/login",children:Object(m.jsx)(pe,{})}),Object(m.jsx)(O.a,{exact:!0,path:"/posts/:id",children:Object(m.jsx)(Je,{})}),Object(m.jsx)(O.a,{exact:!0,path:"/register",children:Object(m.jsx)(Fe,{})}),Object(m.jsx)(O.a,{exact:!0,path:"/about",children:Object(m.jsx)(Xe,{})}),Object(m.jsx)(O.a,{exact:!0,path:"/new_post",children:Object(m.jsx)(on,{})})]})]})})})},bn=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,38)).then((function(n){var t=n.getCLS,c=n.getFID,a=n.getFCP,r=n.getLCP,o=n.getTTFB;t(e),c(e),a(e),r(e),o(e)}))};l.a.render(Object(m.jsx)(j.a.StrictMode,{children:Object(m.jsx)(jn,{})}),document.getElementById("root")),bn()}},[[37,1,2]]]);
//# sourceMappingURL=main.0a4ad2d7.chunk.js.map